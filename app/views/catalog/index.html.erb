<section class="pt-4 pb-16" data-controller="filter">
  <div class="container">

    <h1 class="text-center text-xl mb-8">
      Каталог
    </h1>

    <form method="get" class="mb-8 flex gap-4 items-center">
      <input
    type="text"
    name="query"
    value="<%= params[:query] %>"
    placeholder="Пошук товару"
    class="search-input w-full"
  >

  <% params.except(:controller, :action, :query, :page).each do |key, value| %>
    <% if value.is_a?(Array) %>
      <% value.each do |v| %>
        <input type="hidden" name="<%= "#{key}[]" %>" value="<%= v %>">
      <% end %>
    <% else %>
      <input type="hidden" name="<%= key %>" value="<%= value %>">
    <% end %>
  <% end %>

  <button class="primary-button hidden lg:block">
    Шукати
  </button>

      <button
        type="submit"
        class="primary-button lg:hidden flex items-center justify-center"
      >
        <i class="fa-solid fa-magnifying-glass"></i>
      </button>

      <button
        type="button"
        class="primary-button lg:hidden flex items-center justify-center"
        data-action="click->filter#open"
      >
        <i class="fa-solid fa-sliders"></i> </button>
    </form>


    <div class="flex gap-8">

      <aside
        class="w-64 shrink-0 hidden lg:block border border-black p-4"
      >
        <%= render "catalog/filters" %>
      </aside>

      <aside
        class="fixed top-0 right-0 w-full h-full bg-white z-50
              transform translate-x-full transition-transform duration-300
              border-l border-black p-4 lg:hidden"
        data-filter-target="sidebar"
      >
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-sm font-semibold">Фільтри</h2>
          <button
            class="icon-btn"
            data-action="click->filter#close"
          >
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>

        <%= render "catalog/filters" %>
      </aside>

      <div class="flex-1">

        <form id="filters" method="get"></form>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
  <% @products.each do |product| %>
    <%= render "products/card", product: product %>
  <% end %>
</div>


        <div class="flex justify-center mt-12">
          <%= paginate @products, theme: 'custom' %>
        </div>
      </div>
    </div>
  </div>
</section>