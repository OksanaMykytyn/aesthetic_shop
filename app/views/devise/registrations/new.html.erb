<section class="py-16 bg-white text-black">
  <div class="container max-w-md">

    <h1 class="text-xl text-center mb-8">
      Реєстрація
    </h1>

    <%= form_for(resource,
      as: resource_name,
      url: registration_path(resource_name),
      html: {
        class: "space-y-6",
        data: { controller: "password form-errors" }
      }) do |f| %>

      <div data-field>
        <%= f.text_field :first_name,
          placeholder: "Імʼя",
          class: "search-input w-full #{'input-error' if resource.errors[:first_name].any?}",
          data: { action: "input->form-errors#clear" } %>

        <% resource.errors[:first_name].each do |msg| %>
          <p class="error-text" data-error><%= msg %></p>
        <% end %>
      </div>

      <div data-field>
        <%= f.text_field :last_name,
          placeholder: "Прізвище",
          class: "search-input w-full #{'input-error' if resource.errors[:last_name].any?}",
          data: { action: "input->form-errors#clear" } %>

        <% resource.errors[:last_name].each do |msg| %>
          <p class="error-text" data-error><%= msg %></p>
        <% end %>
      </div>

      <div data-field>
        <%= f.email_field :email,
          placeholder: "Електронна пошта",
          class: "search-input w-full #{'input-error' if resource.errors[:email].any?}",
          data: { action: "input->form-errors#clear" } %>

        <% resource.errors[:email].each do |msg| %>
          <p class="error-text" data-error><%= msg %></p>
        <% end %>
      </div>

<div data-field>
  <div class="relative">
    <%= f.password_field :password,
      placeholder: "Пароль",
      class: "search-input w-full pr-10 #{'input-error' if resource.errors[:password].any?}",
      data: {
        password_target: "input",
        action: "input->form-errors#clear"
      } %>

    <button
      type="button"
      class="absolute right-3 top-1/2 -translate-y-1/2"
      data-action="click->password#toggle"
      tabindex="-1"
    >
      <i class="fa-solid fa-eye"></i>
    </button>
  </div>

  <% resource.errors[:password].each do |msg| %>
    <p class="error-text mt-1" data-error><%= msg %></p>
  <% end %>
</div>


      <div data-field class="flex items-start gap-3 text-sm">
        <input type="checkbox" required class="mt-1 border border-black">
        <p>
          Я погоджуюсь з
          <a href="#" class="underline">політикою конфіденційності</a>
          та
          <a href="#" class="underline">умовами використання</a>
        </p>
      </div>

      <button type="submit" class="primary-button w-full">
        Зареєструватися
      </button>

      <p class="text-sm text-center">
        Вже маєте акаунт?
        <%= link_to "Увійти",
            new_user_session_path,
            class: "underline" %>
      </p>

    <% end %>
  </div>
</section>
