<section class="py-12">
  <div class="container max-w-4xl space-y-8">

    <h1 class="text-xl">
      Замовлення № <%= @order.number || @order.id %>
    </h1>

    <div class="border p-4">
      <%= form_with model: [:admin, @order], method: :patch do |f| %>
        <div class="flex items-center gap-4">
          <span class="text-sm">Статус:</span>

          <%= f.select :status,
Order.statuses.keys,
              {}, class: "border p-2" %>

          <%= f.submit "Змінити",
              class: "primary-button" %>
        </div>
      <% end %>
    </div>

    <div class="border p-4">
      <h2 class="text-sm font-medium mb-2">Користувач</h2>
      <p><%= @order.user.first_name %> <%= @order.user.last_name %></p>
      <p class="text-sm"><%= @order.user.email %></p>
      <p class="text-sm"><%= @order.user.phone_number %></p>
    </div>

    <div class="border p-4">
      <h2 class="text-sm font-medium mb-2">Адреса доставки</h2>
      <% @order.shipping_address.each do |key, value| %>
        <p class="text-sm">
          <strong><%= key.humanize %>:</strong> <%= value %>
        </p>
      <% end %>
    </div>

    <div class="border p-4">
      <h2 class="text-sm font-medium mb-4">Товари</h2>

      <table class="w-full text-sm">
        <thead>
          <tr class="border-b">
            <th class="text-left p-2">Товар</th>
            <th class="p-2">К-сть</th>
            <th class="p-2">Ціна</th>
            <th class="p-2">Сума</th>
          </tr>
        </thead>

        <tbody>
          <% @order.order_items.each do |item| %>
            <tr class="border-b">
              <td class="p-2"><%= item.product_title %></td>
              <td class="p-2 text-center"><%= item.quantity %></td>
              <td class="p-2 text-center">
                <%= number_to_currency(item.unit_price_cents / 100.0, unit: "₴") %>
              </td>
              <td class="p-2 text-center">
                <%= number_to_currency(item.total_price_cents / 100.0, unit: "₴") %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <div class="text-right mt-4 font-medium">
        Разом:
        <%= number_to_currency(@order.total_cents / 100.0, unit: "₴") %>
      </div>
    </div>

  </div>
</section>
