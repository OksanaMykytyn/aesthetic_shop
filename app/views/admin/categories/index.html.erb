<section class="py-12 bg-white">
  <div class="container max-w-3xl space-y-6">

    <!-- Header -->
    <div class="flex justify-between items-center">
      <h1 class="text-xl font-medium">
        Категорії
      </h1>

      <%= link_to "Додати категорію",
        new_admin_category_path,
        class: "px-4 py-2 border border-black text-sm transition
               hover:bg-black hover:text-white" %>
    </div>

    <!-- Table -->
    <div class="border border-black">
      <table class="w-full text-sm">
        <thead class="border-b border-black">
          <tr>
            <th class="p-3 text-left font-medium">Назва</th>
            <th class="p-3 text-center font-medium">Товари</th>
            <th class="p-3 text-right font-medium"></th>
          </tr>
        </thead>

        <tbody>
          <% @categories.each do |category| %>
            <tr class="border-b last:border-b-0">

              <td class="p-3">
                <%= category.name %>
              </td>

              <td class="p-3 text-center text-sm">
                <%= category.products.count %>
              </td>

              <td class="p-3">
                <div class="flex justify-end gap-4 text-xs">

                  <%= link_to "Редагувати",
                    edit_admin_category_path(category),
                    class: "underline underline-offset-4 hover:text-black" %>

                  <% if category.products.any? %>
                    <span class="text-gray-400 cursor-not-allowed">
                      Видалити
                    </span>
                  <% else %>
                    <%= button_to "Видалити",
                      admin_category_path(category),
                      method: :delete,
                      data: { confirm: "Ви впевнені, що хочете видалити категорію?" },
                      class: "underline underline-offset-4 text-red-600 hover:text-red-800" %>
                  <% end %>

                </div>
              </td>

            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

  </div>
</section>
